// Code generated by goa v3.22.5, DO NOT EDIT.
//
// task service
//
// Command:
// $ goa gen github.com/neatflowcv/focus/design

package task

import (
	"context"

	taskviews "github.com/neatflowcv/focus/gen/task/views"
	goa "goa.design/goa/v3/pkg"
)

// Service is the task service interface.
type Service interface {
	// Create a new task.
	Create(context.Context, *TaskInput) (res *Taskdetail, err error)
	// List all tasks.
	List(context.Context, *ListPayload) (res TaskdetailCollection, err error)
}

// APIName is the name of the API as defined in the design.
const APIName = "focus"

// APIVersion is the version of the API as defined in the design.
const APIVersion = "0.0.1"

// ServiceName is the name of the service as defined in the design. This is the
// same value that is set in the endpoint request contexts under the ServiceKey
// key.
const ServiceName = "task"

// MethodNames lists the service method names as defined in the design. These
// are the same values that are set in the endpoint request contexts under the
// MethodKey key.
var MethodNames = [2]string{"create", "list"}

// ListPayload is the payload type of the task service list method.
type ListPayload struct {
	// The authorization header
	Authorization string
	// The ID of the parent task
	ParentID *string
	// Whether to include all subtasks recursively
	Recursive *bool
}

// TaskInput is the payload type of the task service create method.
type TaskInput struct {
	// The authorization header
	Authorization string
	// The parent ID of the task
	ParentID *string
	// The title of the task
	Title string
}

// Taskdetail is the result type of the task service create method.
type Taskdetail struct {
	// The ID of the task
	ID string
	// The parent ID of the task
	ParentID *string
	// The title of the task
	Title string
	// The timestamp when the task was created
	CreatedAt int64
	// The status of the task
	Status string
	// The order of the task
	Order float64
}

// TaskdetailCollection is the result type of the task service list method.
type TaskdetailCollection []*Taskdetail

// MakeInternalServerError builds a goa.ServiceError from an error.
func MakeInternalServerError(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "InternalServerError", false, false, false)
}

// NewTaskdetail initializes result type Taskdetail from viewed result type
// Taskdetail.
func NewTaskdetail(vres *taskviews.Taskdetail) *Taskdetail {
	return newTaskdetail(vres.Projected)
}

// NewViewedTaskdetail initializes viewed result type Taskdetail from result
// type Taskdetail using the given view.
func NewViewedTaskdetail(res *Taskdetail, view string) *taskviews.Taskdetail {
	p := newTaskdetailView(res)
	return &taskviews.Taskdetail{Projected: p, View: "default"}
}

// NewTaskdetailCollection initializes result type TaskdetailCollection from
// viewed result type TaskdetailCollection.
func NewTaskdetailCollection(vres taskviews.TaskdetailCollection) TaskdetailCollection {
	return newTaskdetailCollection(vres.Projected)
}

// NewViewedTaskdetailCollection initializes viewed result type
// TaskdetailCollection from result type TaskdetailCollection using the given
// view.
func NewViewedTaskdetailCollection(res TaskdetailCollection, view string) taskviews.TaskdetailCollection {
	p := newTaskdetailCollectionView(res)
	return taskviews.TaskdetailCollection{Projected: p, View: "default"}
}

// newTaskdetail converts projected type Taskdetail to service type Taskdetail.
func newTaskdetail(vres *taskviews.TaskdetailView) *Taskdetail {
	res := &Taskdetail{
		ParentID: vres.ParentID,
	}
	if vres.ID != nil {
		res.ID = *vres.ID
	}
	if vres.Title != nil {
		res.Title = *vres.Title
	}
	if vres.CreatedAt != nil {
		res.CreatedAt = *vres.CreatedAt
	}
	if vres.Status != nil {
		res.Status = *vres.Status
	}
	if vres.Order != nil {
		res.Order = *vres.Order
	}
	return res
}

// newTaskdetailView projects result type Taskdetail to projected type
// TaskdetailView using the "default" view.
func newTaskdetailView(res *Taskdetail) *taskviews.TaskdetailView {
	vres := &taskviews.TaskdetailView{
		ID:        &res.ID,
		ParentID:  res.ParentID,
		Title:     &res.Title,
		CreatedAt: &res.CreatedAt,
		Status:    &res.Status,
		Order:     &res.Order,
	}
	return vres
}

// newTaskdetailCollection converts projected type TaskdetailCollection to
// service type TaskdetailCollection.
func newTaskdetailCollection(vres taskviews.TaskdetailCollectionView) TaskdetailCollection {
	res := make(TaskdetailCollection, len(vres))
	for i, n := range vres {
		res[i] = newTaskdetail(n)
	}
	return res
}

// newTaskdetailCollectionView projects result type TaskdetailCollection to
// projected type TaskdetailCollectionView using the "default" view.
func newTaskdetailCollectionView(res TaskdetailCollection) taskviews.TaskdetailCollectionView {
	vres := make(taskviews.TaskdetailCollectionView, len(res))
	for i, n := range res {
		vres[i] = newTaskdetailView(n)
	}
	return vres
}
